{"version":3,"file":"main.js","sources":["../src/components/Router.svelte","../src/App.svelte","../src/main.js"],"sourcesContent":["<script>\n  const NO_MATCH = {\n    code: 404,\n    message: \"No Matching Route\"\n  };\n\n  export let routes;\n\n  let promise;\n\n  let selected;\n\n  let path = location.hash.slice(1);\n\n  $: {\n    if (path[0] !== \"/\") {\n      location.hash = \"/\" + path;\n    }\n  }\n\n  function selectComponent() {\n    const currentUrl = path.slice(1);\n\n    const matchedRoute = routes.find(route => {\n      const toMatchPath = (route.path || \"\").slice(1);\n      return (\n        !toMatchPath || // fallback route\n        (toMatchPath === \"*\" && currentUrl) || // Match non-empty route\n        currentUrl.startsWith(toMatchPath)\n      );\n    });\n\n    if (matchedRoute) {\n      if (selected !== matchedRoute.component) {\n        selected = matchedRoute.component;\n        try {\n          promise = matchedRoute.component().then(x => x.default);\n        } catch (_) {\n          promise = Promise.resolve(matchedRoute.component);\n        }\n      }\n    } else {\n      promise = Promise.reject(NO_MATCH);\n      selected = null;\n    }\n  }\n\n  selectComponent();\n\n  function onHashChange() {\n    path = location.hash.slice(1);\n    selectComponent();\n  }\n</script>\n\n<svelte:window on:hashchange=\"{onHashChange}\"></svelte:window>\n\n{#await promise}\n<slot route=\"{path}\">\n  <p>...waiting</p>\n</slot>\n{:then component}\n<svelte:component this=\"{component}\" />\n{:catch error}\n<slot name=\"error\" route=\"{path}\" error=\"{error}\">\n  <p style=\"color: red\">{error.message}</p>\n</slot>\n{/await}\n","<script>\n  import Router from \"./components/Router.svelte\";\n\n  const routes = [\n    {\n      path: \"/about\",\n      component: () => import(\"./components/About.svelte\")\n    },\n    {\n      path: \"/*\",\n      component: () => import(\"./components/Tests.svelte\")\n    },\n    {\n      component: () => import(\"./components/Home.svelte\")\n    }\n  ];\n</script>\n\n<Router routes=\"{routes}\"></Router>\n","import App from \"./App.svelte\";\n\nnew App({\n  target: document.body,\n  data: {\n    name: \"world\"\n  }\n});\n"],"names":["path","error","message","component","promise","onHashChange","NO_MATCH","code","selected","routes","location","hash","slice","selectComponent","currentUrl","matchedRoute","find","route","toMatchPath","startsWith","then","x","default","_","Promise","resolve","reject","import","target","document","body","data","name"],"mappings":"sSAgE2BA,QAAeC,oDAN5BD,gCAOWC,MAAMC,0MAAND,MAAMC,qLAHNC,2HAAAA,wrBALjBC,4DAFuBC,4IAEvBD,iNAxDN,MAAME,EAAW,CACfC,KAAM,IACNL,QAAS,qBAGX,IAEIE,EAEAI,UAJOC,KAMPT,EAAOU,SAASC,KAAKC,MAAM,GAQ/B,SAASC,IACP,MAAMC,EAAad,EAAKY,MAAM,GAExBG,EAAeN,EAAOO,KAAKC,IAC/B,MAAMC,GAAeD,EAAMjB,MAAQ,IAAIY,MAAM,GAC7C,OACGM,GACgB,MAAhBA,GAAuBJ,GACxBA,EAAWK,WAAWD,KAI1B,GAAIH,GACF,GAAIP,IAAaO,EAAaZ,UAAW,CACvCK,EAAWO,EAAaZ,UACxB,gBACEC,EAAUW,EAAaZ,YAAYiB,KAAKC,GAAKA,EAAEC,UAC/C,MAAOC,eACPnB,EAAUoB,QAAQC,QAAQV,EAAaZ,+BAI3CC,EAAUoB,QAAQE,OAAOpB,IACzBE,EAAW,KAIfK,qKAhCkB,MAAZb,EAAK,KACPU,SAASC,KAAO,IAAMX,4CAiC1B,oBACEA,EAAOU,SAASC,KAAKC,MAAM,IAC3BC,4ICjCaJ,6KAfA,CACb,CACET,KAAM,SACNG,UAAW,IAAMwB,OAAO,wBAE1B,CACE3B,KAAM,KACNG,UAAW,IAAMwB,OAAO,wBAE1B,CACExB,UAAW,IAAMwB,OAAO,yBCX9B,gEAAQ,CACNC,OAAQC,SAASC,KACjBC,KAAM,CACJC,KAAM"}