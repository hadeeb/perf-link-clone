function e(e,n){let o={},a=`__xpo${Math.random().toString().substring(2)}__`;"function"==typeof e&&(e=`(${Function.prototype.toString.call(e)})(${a})`),e=r(e,a,o)+`\n(${Function.prototype.toString.call(t)})(self,${a},{})`;let s,c=URL.createObjectURL(new Blob([e])),l=new Worker(c,n),i=l.terminate,u={},p=0;for(s in l.kill=(e=>{l.postMessage({type:"KILL",signal:e}),setTimeout(l.terminate)}),l.terminate=(()=>{URL.revokeObjectURL(c),i.call(l)}),l.call=((e,t)=>new Promise((r,n)=>{let o=`rpc${++p}`;u[o]=[r,n],l.postMessage({type:"RPC",id:o,method:e,params:t})})),l.rpcMethods={},t(l,l.rpcMethods,u),l.expose=(e=>{l[e]=function(){return l.call(e,[].slice.call(arguments))}}),o)s in l||l.expose(s);return l}function t(e,t,r){e.addEventListener("message",({data:n})=>{let o=n.id;if("RPC"===n.type&&null!=o)if(n.method){let r=t[n.method];null==r?e.postMessage({type:"RPC",id:o,error:"NO_SUCH_METHOD"}):Promise.resolve().then(()=>r.apply(null,n.params)).then(t=>{e.postMessage({type:"RPC",id:o,result:t})}).catch(t=>{e.postMessage({type:"RPC",id:o,error:""+t})})}else{let e=r[o];if(null==e)throw Error(`Unknown callback ${o}`);delete r[o],n.error?e[1](Error(n.error)):e[0](n.result)}})}function r(e,t,r){return e=(e=e.replace(/^(\s*)export\s+default\s+/m,(e,n)=>(r.default=!0,`${n}${t}.default=`))).replace(/^(\s*)export\s+((?:async\s*)?function(?:\s*\*)?|const|let|var)(\s+)([a-zA-Z$_][a-zA-Z0-9$_]*)/gm,(e,n,o,a,s)=>(r[s]=!0,`${n}${t}.${s}=${o}${a}${s}`)),`var ${t}={};\n${e}\n${t};`}const n=e=>e.sort()[Math.floor(e.length/2)],o=e=>Math.floor(1e3*e);async function a(e,{iterations:t,isAsync:r}){const o=[];try{let a=t;for(;a>0;){let t=await eval(`${r?"async ":""}()=> {${e.before};let end,start = performance.now();${e.code};end = performance.now();return end - start;}`)();o.push(t),a--}return{error:!1,median:n(o)}}catch(e){return{error:!0,median:0}}}async function s(t,{iterations:r,isAsync:o}){const a=`${o?"async ":""}function run() {try{${t.before};let end,start = performance.now();${t.code};end = performance.now();return end - start;}catch(e){return -1}}`;try{eval(a)}catch(e){return{error:!0,median:0}}const s=e(`export ${a}`),c=[];let l=r,i=!1;for(;l>0;){let e=await s.run();if(e<0){i=!0;break}c.push(e),l--}return s.terminate(),i?{error:!0,median:0}:{error:!1,median:n(c)}}function c(e,t){location.hash=`#/${btoa(e)}/${btoa(JSON.stringify(t))}`}function l(e,t){var r;return function(){var n=this,o=arguments;clearTimeout(r),r=setTimeout(function(){r=null,e.apply(n,o)},t)}}function i(e){let t=!1,r=new Promise((r,n)=>{e.then(function(){t?n({message:"Cancelled"}):r(...arguments)}).catch(function(){n(...arguments)})});return r.cancel=(()=>{t=!0}),r}export{i as a,o as b,c,l as d,s as e,a as f};
//# sourceMappingURL=chunk-a876756f.js.map
